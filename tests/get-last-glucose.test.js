'use strict';

require('should');
const getLastGlucose = require("../lib/glucose-get-last");


describe('getLastGlucose', function () {
  var getLastGlucose = require('../lib/glucose-get-last.js');

  it('should handle NS sgv fields', function () {
    var glucose_status = getLastGlucose([{date: 1467942845000, sgv: 100}, {
      date: 1467942544500,
      sgv: 95
    }, {date: 1467942244000, sgv: 85}, {date: 1467941944000, sgv: 70}]);
    // console.log(glucose_status);
    let result = {
      delta: 5,
      glucose: 100,
      noise: NaN,
      short_avgdelta: 7.5,
      long_avgdelta: 0,
      date: 1467942845000,
      last_cal: 0,
      device: undefined
    }
    glucose_status.delta.should.equal(5);
    glucose_status.glucose.should.equal(100);
    glucose_status.short_avgdelta.should.equal(7.5);
    glucose_status.long_avgdelta.should.equal(0);
  });
  it('should handle two receivers 30s and 3 mg/dL offset', function () {
    var glucose_status = getLastGlucose([{date: 1467942875000, sgv: 103}, {
      date: 1467942845000,
      sgv: 100
    }, {date: 1467942574500, sgv: 98}, {date: 1467942544500, sgv: 95}, {
      date: 1467942274000,
      sgv: 88
    }, {date: 1467942244000, sgv: 85}, {date: 1467941974000, sgv: 73}, {date: 1467941944000, sgv: 70}]);
    //console.log(glucose_status);
    glucose_status.delta.should.equal(5);
    glucose_status.glucose.should.equal(101.5);
    glucose_status.short_avgdelta.should.equal(7.5);
    glucose_status.long_avgdelta.should.equal(0);
  });
  it('should handle fields named glucose and calculate long_avgdelta', function () {
    var glucose_status = getLastGlucose([{"date": 1469509700000, "glucose": 97}, {
      "date": 1469509400000,
      "glucose": 94
    }, {"date": 1469509100000, "glucose": 87}, {"date": 1469508800000, "glucose": 81}, {
      "date": 1469508500000,
      "glucose": 78
    }, {"date": 1469508200000, "glucose": 78}, {"date": 1469507900000, "glucose": 81}, {
      "date": 1469507600000,
      "glucose": 84
    }, {"date": 1469507300000, "glucose": 87}, {"date": 1469507000000, "glucose": 93}, {
      "date": 1469506700000,
      "glucose": 102
    }, {"date": 1469506400000, "glucose": 104}, {"date": 1469506100000, "glucose": 99}, {
      "date": 1469505800000,
      "glucose": 81
    }, {"date": 1469505500000, "glucose": 76}, {date: 1469509700000, glucose: 97}]);
    //console.log(glucose_status);
    glucose_status.delta.should.equal(3);
    glucose_status.glucose.should.equal(97);
    glucose_status.short_avgdelta.should.equal(4.44);
    glucose_status.long_avgdelta.should.equal(2.86);
  });
  it('should fall back to dateString property', function () {
    var glucose_status = getLastGlucose([{
      dateString: "2019-12-04T08:54:19.288-0800",
      sgv: 100
    }, {date: 1467942544500, sgv: 95}, {date: 1467942244000, sgv: 85}, {date: 1467941944000, sgv: 70}]);
    glucose_status.date.should.equal(1575478459288);
  });
  it('should skip meter BG', function () {
    var glucose_status = getLastGlucose([{date: 1467942845000, glucose: null, mbg: 100}, {
      date: 1467942544500,
      sgv: 95
    }, {date: 1467942244000, sgv: 85}, {date: 1467941944000, sgv: 70}]);
    //console.log(glucose_status);
    glucose_status.delta.should.equal(10);
    glucose_status.glucose.should.equal(95);
    glucose_status.short_avgdelta.should.equal(11.25);
    glucose_status.long_avgdelta.should.equal(0);
  });
});

describe("self-glucose-testing", function () {
  var getLastGlucose = require('../lib/glucose-get-last.js');

  it("glucose", function () {
    const glucose_data = [{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T12:04:47.948Z","date":1657281887948,"sgv":184,"glucose":184},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T11:59:47.948Z","date":1657281587948,"sgv":181,"glucose":181},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T11:54:47.948Z","date":1657281287948,"sgv":177,"glucose":177},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T11:49:47.948Z","date":1657280987948,"sgv":173,"glucose":173},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T11:44:47.948Z","date":1657280687948,"sgv":168,"glucose":168},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T11:39:47.948Z","date":1657280387948,"sgv":165,"glucose":165},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T11:34:47.948Z","date":1657280087948,"sgv":161,"glucose":161},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T11:29:47.948Z","date":1657279787948,"sgv":157,"glucose":157},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T11:24:47.948Z","date":1657279487948,"sgv":161,"glucose":161},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T11:19:47.948Z","date":1657279187948,"sgv":163,"glucose":163},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T11:14:47.948Z","date":1657278887948,"sgv":168,"glucose":168},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T11:09:47.948Z","date":1657278587948,"sgv":165,"glucose":165},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T11:04:47.948Z","date":1657278287948,"sgv":168,"glucose":168},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T10:59:47.948Z","date":1657277987948,"sgv":173,"glucose":173},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T10:54:47.948Z","date":1657277687948,"sgv":168,"glucose":168},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T10:49:47.948Z","date":1657277387948,"sgv":172,"glucose":172},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T10:44:47.948Z","date":1657277087948,"sgv":171,"glucose":171},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T10:39:47.948Z","date":1657276787948,"sgv":173,"glucose":173},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T10:34:47.948Z","date":1657276487948,"sgv":171,"glucose":171},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T10:29:47.948Z","date":1657276187948,"sgv":174,"glucose":174},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T10:24:47.948Z","date":1657275887948,"sgv":175,"glucose":175},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T10:19:47.948Z","date":1657275587948,"sgv":170,"glucose":170},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T10:14:47.948Z","date":1657275287948,"sgv":172,"glucose":172},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T10:09:47.948Z","date":1657274987948,"sgv":177,"glucose":177},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T10:04:47.948Z","date":1657274687948,"sgv":174,"glucose":174},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T09:59:47.948Z","date":1657274387948,"sgv":177,"glucose":177},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T09:54:47.948Z","date":1657274087948,"sgv":175,"glucose":175},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T09:49:47.948Z","date":1657273787948,"sgv":174,"glucose":174},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T09:44:47.948Z","date":1657273487948,"sgv":175,"glucose":175},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T09:39:47.948Z","date":1657273187948,"sgv":174,"glucose":174},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T09:34:47.948Z","date":1657272887948,"sgv":175,"glucose":175},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T09:29:47.948Z","date":1657272587948,"sgv":178,"glucose":178},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T09:24:47.948Z","date":1657272287948,"sgv":173,"glucose":173},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T09:19:47.948Z","date":1657271987948,"sgv":172,"glucose":172},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T09:14:47.948Z","date":1657271687948,"sgv":172,"glucose":172},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T09:09:47.948Z","date":1657271387948,"sgv":167,"glucose":167},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T09:04:47.948Z","date":1657271087948,"sgv":163,"glucose":163},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T08:59:47.948Z","date":1657270787948,"sgv":168,"glucose":168},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T08:54:47.948Z","date":1657270487948,"sgv":168,"glucose":168},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T08:49:47.948Z","date":1657270187948,"sgv":164,"glucose":164},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T08:44:47.948Z","date":1657269887948,"sgv":167,"glucose":167},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T08:39:47.948Z","date":1657269587948,"sgv":164,"glucose":164},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T08:34:47.948Z","date":1657269287948,"sgv":168,"glucose":168},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T08:29:47.948Z","date":1657268987948,"sgv":163,"glucose":163},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T08:24:47.948Z","date":1657268687948,"sgv":162,"glucose":162},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T08:19:47.948Z","date":1657268387948,"sgv":161,"glucose":161},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T08:14:47.948Z","date":1657268087948,"sgv":156,"glucose":156},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T08:09:47.948Z","date":1657267787948,"sgv":158,"glucose":158},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T08:04:47.948Z","date":1657267487948,"sgv":161,"glucose":161},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T07:59:47.948Z","date":1657267187948,"sgv":164,"glucose":164},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T07:54:47.948Z","date":1657266887948,"sgv":159,"glucose":159},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T07:49:47.948Z","date":1657266587948,"sgv":156,"glucose":156},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T07:44:47.948Z","date":1657266287948,"sgv":158,"glucose":158},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T07:39:47.948Z","date":1657265987948,"sgv":156,"glucose":156},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T07:34:47.948Z","date":1657265687948,"sgv":152,"glucose":152},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T07:29:47.948Z","date":1657265387948,"sgv":151,"glucose":151},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T07:24:47.948Z","date":1657265087948,"sgv":155,"glucose":155},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T07:19:47.948Z","date":1657264787948,"sgv":150,"glucose":150},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T07:14:47.948Z","date":1657264487948,"sgv":150,"glucose":150},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T07:09:47.948Z","date":1657264187948,"sgv":147,"glucose":147},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T07:04:47.948Z","date":1657263887948,"sgv":148,"glucose":148},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T06:59:47.948Z","date":1657263587948,"sgv":144,"glucose":144},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T06:54:47.948Z","date":1657263287948,"sgv":143,"glucose":143},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T06:49:47.948Z","date":1657262987948,"sgv":146,"glucose":146},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T06:44:47.948Z","date":1657262687948,"sgv":149,"glucose":149},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T06:39:47.948Z","date":1657262387948,"sgv":150,"glucose":150},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T06:34:47.948Z","date":1657262087948,"sgv":146,"glucose":146},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T06:29:47.948Z","date":1657261787948,"sgv":146,"glucose":146},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T06:24:47.948Z","date":1657261487948,"sgv":143,"glucose":143},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T06:19:47.948Z","date":1657261187948,"sgv":147,"glucose":147},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T06:14:47.948Z","date":1657260887948,"sgv":142,"glucose":142},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T06:09:47.948Z","date":1657260587948,"sgv":138,"glucose":138},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T06:04:47.948Z","date":1657260287948,"sgv":143,"glucose":143},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T05:59:47.948Z","date":1657259987948,"sgv":144,"glucose":144},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T05:54:47.948Z","date":1657259687948,"sgv":148,"glucose":148},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T05:49:47.948Z","date":1657259387948,"sgv":146,"glucose":146},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T05:44:47.948Z","date":1657259087948,"sgv":143,"glucose":143},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T05:39:47.948Z","date":1657258787948,"sgv":144,"glucose":144},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T05:34:47.948Z","date":1657258487948,"sgv":140,"glucose":140},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T05:29:47.948Z","date":1657258187948,"sgv":143,"glucose":143},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T05:24:47.948Z","date":1657257887948,"sgv":147,"glucose":147},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T05:19:47.948Z","date":1657257587948,"sgv":152,"glucose":152},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T05:14:47.948Z","date":1657257287948,"sgv":152,"glucose":152},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T05:09:47.948Z","date":1657256987948,"sgv":151,"glucose":151},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T05:04:47.948Z","date":1657256687948,"sgv":154,"glucose":154},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T04:59:47.948Z","date":1657256387948,"sgv":150,"glucose":150},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T04:54:47.948Z","date":1657256087948,"sgv":147,"glucose":147},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T04:49:47.948Z","date":1657255787948,"sgv":151,"glucose":151},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T04:44:47.948Z","date":1657255487948,"sgv":150,"glucose":150},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T04:39:47.948Z","date":1657255187948,"sgv":153,"glucose":153},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T04:34:47.948Z","date":1657254887948,"sgv":149,"glucose":149},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T04:29:47.948Z","date":1657254587948,"sgv":151,"glucose":151},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T04:24:47.948Z","date":1657254287948,"sgv":152,"glucose":152},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T04:19:47.948Z","date":1657253987948,"sgv":147,"glucose":147},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T04:14:47.948Z","date":1657253687948,"sgv":150,"glucose":150},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T04:09:47.948Z","date":1657253387948,"sgv":153,"glucose":153},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T04:04:47.948Z","date":1657253087948,"sgv":150,"glucose":150},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T03:59:47.948Z","date":1657252787948,"sgv":146,"glucose":146},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T03:54:47.948Z","date":1657252487948,"sgv":146,"glucose":146},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T03:49:47.948Z","date":1657252187948,"sgv":144,"glucose":144},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T03:44:47.948Z","date":1657251887948,"sgv":148,"glucose":148},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T03:39:47.948Z","date":1657251587948,"sgv":145,"glucose":145},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T03:34:47.948Z","date":1657251287948,"sgv":145,"glucose":145},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T03:29:47.948Z","date":1657250987948,"sgv":141,"glucose":141},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T03:24:47.948Z","date":1657250687948,"sgv":143,"glucose":143},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T03:19:47.948Z","date":1657250387948,"sgv":143,"glucose":143},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T03:14:47.948Z","date":1657250087948,"sgv":140,"glucose":140},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T03:09:47.948Z","date":1657249787948,"sgv":140,"glucose":140},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T03:04:47.948Z","date":1657249487948,"sgv":139,"glucose":139},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T02:59:47.948Z","date":1657249187948,"sgv":135,"glucose":135},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T02:54:47.948Z","date":1657248887948,"sgv":135,"glucose":135},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T02:49:47.948Z","date":1657248587948,"sgv":134,"glucose":134},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T02:44:47.948Z","date":1657248287948,"sgv":131,"glucose":131},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T02:39:47.948Z","date":1657247987948,"sgv":129,"glucose":129},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T02:34:47.948Z","date":1657247687948,"sgv":128,"glucose":128},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T02:29:47.948Z","date":1657247387948,"sgv":126,"glucose":126},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T02:24:47.948Z","date":1657247087948,"sgv":129,"glucose":129},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T02:19:47.948Z","date":1657246787948,"sgv":134,"glucose":134},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T02:14:47.948Z","date":1657246487948,"sgv":138,"glucose":138},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T02:09:47.948Z","date":1657246187948,"sgv":142,"glucose":142},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T02:04:47.948Z","date":1657245887948,"sgv":147,"glucose":147},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T01:59:47.948Z","date":1657245587948,"sgv":152,"glucose":152},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T01:54:47.948Z","date":1657245287948,"sgv":147,"glucose":147},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T01:49:47.948Z","date":1657244987948,"sgv":148,"glucose":148},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T01:44:47.948Z","date":1657244687948,"sgv":144,"glucose":144},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T01:39:47.948Z","date":1657244387948,"sgv":144,"glucose":144},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T01:34:47.948Z","date":1657244087948,"sgv":141,"glucose":141},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T01:29:47.948Z","date":1657243787948,"sgv":140,"glucose":140},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T01:24:47.948Z","date":1657243487948,"sgv":141,"glucose":141},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T01:19:47.948Z","date":1657243187948,"sgv":146,"glucose":146},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T01:14:47.948Z","date":1657242887948,"sgv":141,"glucose":141},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T01:09:47.948Z","date":1657242587948,"sgv":136,"glucose":136},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T01:04:47.948Z","date":1657242287948,"sgv":139,"glucose":139},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T00:59:47.948Z","date":1657241987948,"sgv":135,"glucose":135},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T00:54:47.948Z","date":1657241687948,"sgv":137,"glucose":137},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T00:49:47.948Z","date":1657241387948,"sgv":138,"glucose":138},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T00:44:47.948Z","date":1657241087948,"sgv":133,"glucose":133},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T00:39:47.948Z","date":1657240787948,"sgv":131,"glucose":131},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T00:34:47.948Z","date":1657240487948,"sgv":127,"glucose":127},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T00:29:47.948Z","date":1657240187948,"sgv":122,"glucose":122},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T00:24:47.948Z","date":1657239887948,"sgv":124,"glucose":124},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T00:19:47.948Z","date":1657239587948,"sgv":123,"glucose":123},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T00:14:47.948Z","date":1657239287948,"sgv":119,"glucose":119},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T00:09:47.948Z","date":1657238987948,"sgv":121,"glucose":121},{"type":"sgv","device":"fakecgm","dateString":"2022-07-08T00:04:47.948Z","date":1657238687948,"sgv":120,"glucose":120},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T23:59:47.948Z","date":1657238387948,"sgv":119,"glucose":119},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T23:54:47.948Z","date":1657238087948,"sgv":123,"glucose":123},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T23:49:47.948Z","date":1657237787948,"sgv":128,"glucose":128},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T23:44:47.948Z","date":1657237487948,"sgv":127,"glucose":127},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T23:39:47.948Z","date":1657237187948,"sgv":126,"glucose":126},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T23:34:47.948Z","date":1657236887948,"sgv":123,"glucose":123},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T23:29:47.948Z","date":1657236587948,"sgv":119,"glucose":119},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T23:24:47.948Z","date":1657236287948,"sgv":114,"glucose":114},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T23:19:47.948Z","date":1657235987948,"sgv":109,"glucose":109},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T23:14:47.948Z","date":1657235687948,"sgv":104,"glucose":104},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T23:09:47.948Z","date":1657235387948,"sgv":104,"glucose":104},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T23:04:47.948Z","date":1657235087948,"sgv":107,"glucose":107},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T22:59:47.948Z","date":1657234787948,"sgv":109,"glucose":109},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T22:54:47.948Z","date":1657234487948,"sgv":112,"glucose":112},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T22:49:47.948Z","date":1657234187948,"sgv":108,"glucose":108},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T22:44:47.948Z","date":1657233887948,"sgv":112,"glucose":112},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T22:39:47.948Z","date":1657233587948,"sgv":107,"glucose":107},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T22:34:47.948Z","date":1657233287948,"sgv":104,"glucose":104},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T22:29:47.948Z","date":1657232987948,"sgv":106,"glucose":106},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T22:24:47.948Z","date":1657232687948,"sgv":105,"glucose":105},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T22:19:47.948Z","date":1657232387948,"sgv":109,"glucose":109},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T22:14:47.948Z","date":1657232087948,"sgv":110,"glucose":110},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T22:09:47.948Z","date":1657231787948,"sgv":109,"glucose":109},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T22:04:47.948Z","date":1657231487948,"sgv":108,"glucose":108},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T21:59:47.948Z","date":1657231187948,"sgv":108,"glucose":108},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T21:54:47.948Z","date":1657230887948,"sgv":103,"glucose":103},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T21:49:47.948Z","date":1657230587948,"sgv":99,"glucose":99},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T21:44:47.948Z","date":1657230287948,"sgv":95,"glucose":95},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T21:39:47.948Z","date":1657229987948,"sgv":92,"glucose":92},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T21:34:47.948Z","date":1657229687948,"sgv":92,"glucose":92},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T21:29:47.948Z","date":1657229387948,"sgv":92,"glucose":92},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T21:24:47.948Z","date":1657229087948,"sgv":91,"glucose":91},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T21:19:47.948Z","date":1657228787948,"sgv":91,"glucose":91},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T21:14:47.948Z","date":1657228487948,"sgv":87,"glucose":87},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T21:09:47.948Z","date":1657228187948,"sgv":82,"glucose":82},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T21:04:47.948Z","date":1657227887948,"sgv":85,"glucose":85},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T20:59:47.948Z","date":1657227587948,"sgv":81,"glucose":81},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T20:54:47.948Z","date":1657227287948,"sgv":81,"glucose":81},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T20:49:47.948Z","date":1657226987948,"sgv":77,"glucose":77},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T20:44:47.948Z","date":1657226687948,"sgv":77,"glucose":77},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T20:39:47.948Z","date":1657226387948,"sgv":72,"glucose":72},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T20:34:47.948Z","date":1657226087948,"sgv":69,"glucose":69},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T20:29:47.948Z","date":1657225787948,"sgv":72,"glucose":72},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T20:24:47.948Z","date":1657225487948,"sgv":74,"glucose":74},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T20:19:47.948Z","date":1657225187948,"sgv":71,"glucose":71},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T20:14:47.948Z","date":1657224887948,"sgv":70,"glucose":70},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T20:09:47.948Z","date":1657224587948,"sgv":66,"glucose":66},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T20:04:47.948Z","date":1657224287948,"sgv":66,"glucose":66},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T19:59:47.948Z","date":1657223987948,"sgv":69,"glucose":69},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T19:54:47.948Z","date":1657223687948,"sgv":74,"glucose":74},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T19:49:47.948Z","date":1657223387948,"sgv":78,"glucose":78},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T19:44:47.948Z","date":1657223087948,"sgv":81,"glucose":81},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T19:39:47.948Z","date":1657222787948,"sgv":77,"glucose":77},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T19:34:47.948Z","date":1657222487948,"sgv":72,"glucose":72},{"type":"sgv","device":"fakecgm","dateString":"2022-07-07T19:29:47.948Z","date":1657222187948,"sgv":76,"glucose":76}]
    let glucose_status = getLastGlucose(glucose_data);
    console.log(glucose_status);
  });
})
